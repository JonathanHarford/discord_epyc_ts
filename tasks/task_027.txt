# Task ID: 27
# Title: Refine and Integrate Messaging Layer
# Status: pending
# Dependencies: 5
# Priority: medium
# Description: Refine and fully implement the messaging layer (`src/messaging/`) as described in the architecture. This layer is responsible for taking structured data payloads and message instructions from the service layer and generating the final, user-facing strings for all bot replies (DMs, public channel messages, ephemeral messages). Integrate i18n if planned, otherwise use simple string formatting. Ensure all command handlers and DM processing logic use this layer for output.

Architectural Decisions related to this layer:
1. Services should be designed to be chat platform-independent. Core logic should be abstracted from platform-specific APIs.
2. Service methods invoked by commands should return a common, platform-agnostic data structure (e.g., a `MessageInstruction` type). This structure will be translated by a platform-specific adapter (the messaging layer itself or a component it uses).
# Details:
Define the `MessageInstruction` data structure used for communication between services and the messaging layer. Implement the translation logic within the messaging layer to convert this structure into platform-specific message formats.

# Test Strategy:
Review all user-facing messages generated by the bot. Verify they are consistently formatted and generated via the messaging layer. Test messages with different data payloads (represented by the `MessageInstruction` structure) to ensure correct formatting and translation.
