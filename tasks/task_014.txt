# Task ID: 14
# Title: Implement Turn Offering Mechanism
# Status: in-progress
# Dependencies: 5, 9, 13
# Priority: medium
# Description: Implement the mechanism that triggers the selection and offering of the next turn. This should be called after a turn is COMPLETED or SKIPPED, or when a season is activated. It uses the Next Player Logic (Task 13) to find the next player, calls `TurnService.offerTurn` to update the state, sends the DM notification to the selected player, and schedules the claim timeout timer via the Task Scheduler.
# Details:
Implement the core logic for triggering the turn offering process. This involves:
- Identifying the trigger points (Turn COMPLETED/SKIPPED, Season Activated).
- Calling the Next Player Logic (Task 13) to determine the next player.
- Updating the game state via `TurnService.offerTurn`.
- Sending a Discord DM notification to the selected player.
- Scheduling the turn claim timeout timer using the Task Scheduler.

# Test Strategy:
Implement comprehensive tests covering the turn offering mechanism:
1.  **Unit Tests:** Test the core logic components in isolation, particularly the selection and state update logic, mocking external dependencies like the database, Discord API, and Task Scheduler.
2.  **Integration Tests:** Test the interaction between the turn offering logic and the database using a test database. Verify state changes are correctly persisted without involving Discord or the Task Scheduler directly.
3.  **End-to-End/Manual Testing:** Complete or skip a turn in a test game. Verify the Turn Offering Mechanism is triggered. Verify the correct next player is selected (using Task 13), the turn state becomes OFFERED, the player receives a DM notification, and the claim timer is scheduled.

# Subtasks:
## 14.1. undefined [pending]
### Dependencies: None
### Description: Implement the core logic for triggering and executing the turn offering process.
### Details:


## 14.2. undefined [pending]
### Dependencies: None
### Description: Integrate with Next Player Logic (Task 13) to get the next player.
### Details:


## 14.3. undefined [pending]
### Dependencies: None
### Description: Implement the call to `TurnService.offerTurn` to update game state.
### Details:


## 14.4. undefined [pending]
### Dependencies: None
### Description: Implement sending the Discord DM notification to the selected player.
### Details:


## 14.5. undefined [pending]
### Dependencies: None
### Description: Implement scheduling the turn claim timeout timer via the Task Scheduler.
### Details:


## 14.6. undefined [pending]
### Dependencies: None
### Description: Write Unit Tests for the turn offering logic layer.
### Details:


## 14.7. undefined [pending]
### Dependencies: None
### Description: Write Integration Tests for the turn offering mechanism against a test database.
### Details:


