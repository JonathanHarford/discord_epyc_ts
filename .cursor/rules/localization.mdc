---
description:
globs:
alwaysApply: false
---
- **English-Only Text Management:**
    - All user-facing text strings are managed in a single TypeScript file: `src/lang/en.ts`.
    - The file exports a structured object containing all application text organized hierarchically.
    - No internationalization library is used - direct object access provides English strings.

- **Text Structure:**
    - **`common`**: Shared data like bot info, emojis, colors, and links
    - **`display`**: Embed templates for various commands and responses  
    - **`validation`**: Error and validation message embeds
    - **`channelRegexes`**: Regular expressions for channel matching
    - **`refs`**: Command references with names, descriptions, and permissions
    - **`messages`**: Detailed text content organized by feature/command

- **Command-Specific Messages:**
    - Group messages under the command name in the `messages` object (e.g., `messages.newCommand`).
    - Further nest by sub-context if necessary (e.g., `messages.newCommand.season`).
    - Use descriptive key names (e.g., `create_success_channel`, `error_name_taken`).
    - **Example:**
      ```typescript
      export const enStrings = {
        messages: {
          newCommand: {
            season: {
              create_success_channel: "✅ Season '{seasonName}' (ID: {seasonId}) created successfully!",
              error_name_taken: "❌ A season with the name '{name}' already exists."
            },
            error_unknown_subcommand: "Unknown subcommand for /new."
          }
        }
      };
      ```

- **Common/Shared Messages:**
    - Group shared messages under `messages.common`.
    - Categorize further if needed (e.g., `messages.common.error`).
    - **Example:**
      ```typescript
      export const enStrings = {
        messages: {
          common: {
            error: {
              critical_command: "A critical unexpected error occurred. Please contact support.",
              invalid_input: "The input provided was invalid. Please try again."
            }
          }
        }
      };
      ```

- **Placeholders:**
    - Use curly braces for placeholders in text strings (e.g., `{seasonName}`, `{errorCode}`).
    - The `replaceVariables()` helper function handles substitution automatically.

- **Accessing Text in Code:**
    - Use the `Lang` service methods from `src/services/lang.ts` ([lang.ts](mdc:src/services/lang.ts)).
    - The API remains the same: `Lang.getRef()`, `Lang.getEmbed()`, `Lang.getRegex()`, `Lang.getCom()`.
    - All methods now return English text directly from the `enStrings` object.
    - **Example:**
      ```typescript
      import { Lang } from '../../services/lang.js';

      // Get a reference message with variable substitution
      const successMessage = Lang.getRef(
        'newCommand.season.create_success_channel',
        'en-US', // Language code (ignored, always returns English)
        { seasonName: 'My Awesome Season', seasonId: 'xyz123' }
      );

      // Get an embed template
      const embed = Lang.getEmbed('display.help.main', 'en-US', { botName: 'MyBot' });
      ```

- **File Structure:**
  - **Primary file**: `src/lang/en.ts` - Contains all English text in a structured TypeScript object
  - **Service file**: `src/services/lang.ts` - Provides the same API as before but accesses English text directly
  - **Helper functions**: `getNestedValue()` and `replaceVariables()` handle object traversal and variable substitution

- **Migration Notes:**
  - Existing code using `Lang.getRef()`, `Lang.getEmbed()`, etc. continues to work unchanged
  - Language codes are accepted but ignored (always returns English)
  - The `getRefLocalizationMap()` method returns English text for all locales
